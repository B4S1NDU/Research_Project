import{r as E,a as Pe,c as Fe,g as Me,R as Be}from"./vendor-DzFEYc3-.js";import{S as ze,L as He,R as we,G as Ie,I as Ue}from"./konva-DnU5yHdI.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const L of c.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&s(L)}).observe(document,{childList:!0,subtree:!0});function h(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=h(n);fetch(n.href,c)}})();var Oe={exports:{}},be={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qe=E,Ke=Symbol.for("react.element"),Ye=Symbol.for("react.fragment"),We=Object.prototype.hasOwnProperty,$e=qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ge={key:!0,ref:!0,__self:!0,__source:!0};function Ae(o,a,h){var s,n={},c=null,L=null;h!==void 0&&(c=""+h),a.key!==void 0&&(c=""+a.key),a.ref!==void 0&&(L=a.ref);for(s in a)We.call(a,s)&&!Ge.hasOwnProperty(s)&&(n[s]=a[s]);if(o&&o.defaultProps)for(s in a=o.defaultProps,a)n[s]===void 0&&(n[s]=a[s]);return{$$typeof:Ke,type:o,key:c,ref:L,props:n,_owner:$e.current}}be.Fragment=Ye;be.jsx=Ae;be.jsxs=Ae;Oe.exports=be;var e=Oe.exports,Ne={},_e=Pe;Ne.createRoot=_e.createRoot,Ne.hydrateRoot=_e.hydrateRoot;const Ze=[{id:"painting",title:"Kandyan Painting Restoration",description:"Restore ancient temple murals using traditional techniques from the Kingdom of Kandy.",icon:"ðŸŽ¨",difficulty:"Beginner",estimatedTime:"10-15 min",culturalFocus:"Buddhist temple art",historicalPeriod:"17th-19th Century CE"},{id:"mask",title:"Kolam Mask Painting",description:"Create protective ritual masks using ancestral techniques from Southern coastal regions.",icon:"ðŸŽ­",difficulty:"Intermediate",estimatedTime:"15-20 min",culturalFocus:"Ritual theater",historicalPeriod:"Pre-Buddhist Era"},{id:"pottery",title:"Clay Pot Decoration",description:"Decorate ceremonial vessels with motifs from ancient Anuradhapura and Polonnaruwa.",icon:"ðŸº",difficulty:"Advanced",estimatedTime:"20-25 min",culturalFocus:"Ceremonial vessels",historicalPeriod:"3rd Century BCE"}],Je=({onCraftSelect:o})=>{const[a,h]=E.useState(null);return e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsxs("div",{className:"text-center py-8 animate-fade-in-down",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-gold-primary via-gold-secondary to-gold-primary mb-6 drop-shadow-sm",children:"ðŸ›ï¸ Sri Lankan Cultural Crafts"}),e.jsx("p",{className:"text-xl md:text-2xl text-ivory/80 font-light font-body tracking-wide",children:"Choose Your Interactive Heritage Experience"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:Ze.map((s,n)=>e.jsxs("button",{className:`relative group bg-gradient-card border border-gold-primary/20 rounded-[2rem] p-8 text-left transition-all duration-500 hover:shadow-glow hover:border-gold-primary hover:-translate-y-3
                ${a===s.id?"z-10 bg-white/5":""}`,onMouseEnter:()=>h(s.id),onMouseLeave:()=>h(null),onClick:()=>o(s.id),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gold-primary/5 to-transparent rounded-[2rem] opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsx("span",{className:"text-7xl mb-8 block transform transition-transform duration-500 group-hover:scale-110 drop-shadow-lg",children:s.icon}),e.jsx("h2",{className:"text-3xl font-display font-bold text-gold-secondary mb-4 group-hover:text-gold-primary transition-colors",children:s.title}),e.jsx("p",{className:"text-lg text-ivory/70 mb-8 min-h-[60px] leading-relaxed",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 my-6 p-4 bg-black/30 rounded-2xl border border-white/5 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs uppercase tracking-wider text-gold-accent mb-1",children:"Duration"}),e.jsx("span",{className:"font-semibold text-ivory",children:s.estimatedTime})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs uppercase tracking-wider text-gold-accent mb-1",children:"Level"}),e.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-sm font-bold w-fit
                    ${s.difficulty==="Beginner"?"text-forest-green bg-forest-green/20":""}
                    ${s.difficulty==="Intermediate"?"text-gold-secondary bg-gold-primary/20":""}
                    ${s.difficulty==="Advanced"?"text-maroon-temple bg-maroon-temple/20":""}
                  `,children:s.difficulty})]}),e.jsxs("div",{className:"col-span-2 flex flex-col pt-2 border-t border-white/10",children:[e.jsx("span",{className:"text-xs uppercase tracking-wider text-gold-accent mb-1",children:"Period"}),e.jsx("span",{className:"font-semibold text-ivory text-sm",children:s.historicalPeriod})]})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-between text-gold-primary font-bold tracking-widest uppercase text-sm group-hover:text-white transition-colors",children:[e.jsx("span",{children:"Tap to Begin"}),e.jsx("span",{className:"text-2xl transform transition-transform duration-300 group-hover:translate-x-2",children:"â†’"})]})]},s.id))}),e.jsxs("div",{className:"bg-black/30 border border-gold-primary/10 rounded-3xl p-8 backdrop-blur-md",children:[e.jsxs("h3",{className:"text-2xl font-display font-bold text-gold-secondary mb-6 flex items-center gap-3",children:[e.jsx("span",{children:"ðŸ“š"})," What You'll Learn"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-3xl",children:"ðŸŽ¯"}),e.jsx("span",{className:"text-ivory/90 font-medium",children:"Traditional artistic techniques"})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-3xl",children:"ðŸ§ "}),e.jsx("span",{className:"text-ivory/90 font-medium",children:"Cultural symbolism & iconography"})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-3xl",children:"ðŸ›ï¸"}),e.jsx("span",{className:"text-ivory/90 font-medium",children:"Religious & spiritual significance"})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-3xl",children:"ðŸ”¬"}),e.jsx("span",{className:"text-ivory/90 font-medium",children:"Heritage preservation methods"})]})]})]})]})})};var Le={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(o,a){((h,s)=>{o.exports=s()})(Fe,function h(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},n,c=!s.document&&!!s.postMessage,L=s.IS_PAPA_WORKER||!1,D={},U=0,g={};function N(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(r){var l=ae(r);l.chunkSize=parseInt(l.chunkSize),r.step||r.chunk||(l.chunkSize=null),this._handle=new F(l),(this._handle.streamer=this)._config=l}).call(this,t),this.parseChunk=function(r,l){var m=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<m){let d=this._config.newline;d||(x=this._config.quoteChar||'"',d=this._handle.guessLineEndings(r,x)),r=[...r.split(d).slice(m)].join(d)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(x=this._config.beforeFirstChunk(r))!==void 0&&(r=x),this.isFirstChunk=!1,this._halted=!1;var m=this._partialLine+r,x=(this._partialLine="",this._handle.parse(m,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(r=x.meta.cursor,m=(this._finished||(this._partialLine=m.substring(r-this._baseIndex),this._baseIndex=r),x&&x.data&&(this._rowCount+=x.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),L)s.postMessage({results:x,workerId:g.WORKER_ID,finished:m});else if(A(this._config.chunk)&&!l){if(this._config.chunk(x,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=x=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(x.data),this._completeResults.errors=this._completeResults.errors.concat(x.errors),this._completeResults.meta=x.meta),this._completed||!m||!A(this._config.complete)||x&&x.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),m||x&&x.meta.paused||this._nextChunk(),x}this._halted=!0},this._sendError=function(r){A(this._config.error)?this._config.error(r):L&&this._config.error&&s.postMessage({workerId:g.WORKER_ID,error:r,finished:!1})}}function R(t){var r;(t=t||{}).chunkSize||(t.chunkSize=g.RemoteChunkSize),N.call(this,t),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(l){this._input=l,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),c||(r.onload=se(this._chunkLoaded,this),r.onerror=se(this._chunkError,this)),r.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var l,m=this._config.downloadRequestHeaders;for(l in m)r.setRequestHeader(l,m[l])}var x;this._config.chunkSize&&(x=this._start+this._config.chunkSize-1,r.setRequestHeader("Range","bytes="+this._start+"-"+x));try{r.send(this._config.downloadRequestBody)}catch(d){this._chunkError(d.message)}c&&r.status===0&&this._chunkError()}},this._chunkLoaded=function(){r.readyState===4&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize||r.responseText.length,this._finished=!this._config.chunkSize||this._start>=(l=>(l=l.getResponseHeader("Content-Range"))!==null?parseInt(l.substring(l.lastIndexOf("/")+1)):-1)(r),this.parseChunk(r.responseText)))},this._chunkError=function(l){l=r.statusText||l,this._sendError(new Error(l))}}function z(t){(t=t||{}).chunkSize||(t.chunkSize=g.LocalChunkSize),N.call(this,t);var r,l,m=typeof FileReader<"u";this.stream=function(x){this._input=x,l=x.slice||x.webkitSlice||x.mozSlice,m?((r=new FileReader).onload=se(this._chunkLoaded,this),r.onerror=se(this._chunkError,this)):r=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var x=this._input,d=(this._config.chunkSize&&(d=Math.min(this._start+this._config.chunkSize,this._input.size),x=l.call(x,this._start,d)),r.readAsText(x,this._config.encoding));m||this._chunkLoaded({target:{result:d}})},this._chunkLoaded=function(x){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(x.target.result)},this._chunkError=function(){this._sendError(r.error)}}function P(t){var r;N.call(this,t=t||{}),this.stream=function(l){return r=l,this._nextChunk()},this._nextChunk=function(){var l,m;if(!this._finished)return l=this._config.chunkSize,r=l?(m=r.substring(0,l),r.substring(l)):(m=r,""),this._finished=!r,this.parseChunk(m)}}function O(t){N.call(this,t=t||{});var r=[],l=!0,m=!1;this.pause=function(){N.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){N.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(x){this._input=x,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){m&&r.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),r.length?this.parseChunk(r.shift()):l=!0},this._streamData=se(function(x){try{r.push(typeof x=="string"?x:x.toString(this._config.encoding)),l&&(l=!1,this._checkIsFinished(),this.parseChunk(r.shift()))}catch(d){this._streamError(d)}},this),this._streamError=se(function(x){this._streamCleanUp(),this._sendError(x)},this),this._streamEnd=se(function(){this._streamCleanUp(),m=!0,this._streamData("")},this),this._streamCleanUp=se(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function F(t){var r,l,m,x,d=Math.pow(2,53),y=-d,i=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,b=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,f=this,v=0,u=0,S=!1,j=!1,C=[],p={data:[],errors:[],meta:{}};function K(T){return t.skipEmptyLines==="greedy"?T.join("").trim()==="":T.length===1&&T[0].length===0}function Y(){if(p&&m&&(V("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+g.DefaultDelimiter+"'"),m=!1),t.skipEmptyLines&&(p.data=p.data.filter(function(w){return!K(w)})),Z()){let w=function(G,J){A(t.transformHeader)&&(G=t.transformHeader(G,J)),C.push(G)};if(p)if(Array.isArray(p.data[0])){for(var T=0;Z()&&T<p.data.length;T++)p.data[T].forEach(w);p.data.splice(0,1)}else p.data.forEach(w)}function k(w,G){for(var J=t.header?{}:[],B=0;B<w.length;B++){var H=B,I=w[B],I=((le,_)=>(W=>(t.dynamicTypingFunction&&t.dynamicTyping[W]===void 0&&(t.dynamicTyping[W]=t.dynamicTypingFunction(W)),(t.dynamicTyping[W]||t.dynamicTyping)===!0))(le)?_==="true"||_==="TRUE"||_!=="false"&&_!=="FALSE"&&((W=>{if(i.test(W)&&(W=parseFloat(W),y<W&&W<d))return 1})(_)?parseFloat(_):b.test(_)?new Date(_):_===""?null:_):_)(H=t.header?B>=C.length?"__parsed_extra":C[B]:H,I=t.transform?t.transform(I,H):I);H==="__parsed_extra"?(J[H]=J[H]||[],J[H].push(I)):J[H]=I}return t.header&&(B>C.length?V("FieldMismatch","TooManyFields","Too many fields: expected "+C.length+" fields but parsed "+B,u+G):B<C.length&&V("FieldMismatch","TooFewFields","Too few fields: expected "+C.length+" fields but parsed "+B,u+G)),J}var $;p&&(t.header||t.dynamicTyping||t.transform)&&($=1,!p.data.length||Array.isArray(p.data[0])?(p.data=p.data.map(k),$=p.data.length):p.data=k(p.data,0),t.header&&p.meta&&(p.meta.fields=C),u+=$)}function Z(){return t.header&&C.length===0}function V(T,k,$,w){T={type:T,code:k,message:$},w!==void 0&&(T.row=w),p.errors.push(T)}A(t.step)&&(x=t.step,t.step=function(T){p=T,Z()?Y():(Y(),p.data.length!==0&&(v+=T.data.length,t.preview&&v>t.preview?l.abort():(p.data=p.data[0],x(p,f))))}),this.parse=function(T,k,$){var w=t.quoteChar||'"',w=(t.newline||(t.newline=this.guessLineEndings(T,w)),m=!1,t.delimiter?A(t.delimiter)&&(t.delimiter=t.delimiter(T),p.meta.delimiter=t.delimiter):((w=((G,J,B,H,I)=>{var le,_,W,xe;I=I||[",","	","|",";",g.RECORD_SEP,g.UNIT_SEP];for(var me=0;me<I.length;me++){for(var ne,pe=I[me],ee=0,oe=0,X=0,re=(W=void 0,new M({comments:H,delimiter:pe,newline:J,preview:10}).parse(G)),he=0;he<re.data.length;he++)B&&K(re.data[he])?X++:(ne=re.data[he].length,oe+=ne,W===void 0?W=ne:0<ne&&(ee+=Math.abs(ne-W),W=ne));0<re.data.length&&(oe/=re.data.length-X),(_===void 0||ee<=_)&&(xe===void 0||xe<oe)&&1.99<oe&&(_=ee,le=pe,xe=oe)}return{successful:!!(t.delimiter=le),bestDelimiter:le}})(T,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=w.bestDelimiter:(m=!0,t.delimiter=g.DefaultDelimiter),p.meta.delimiter=t.delimiter),ae(t));return t.preview&&t.header&&w.preview++,r=T,l=new M(w),p=l.parse(r,k,$),Y(),S?{meta:{paused:!0}}:p||{meta:{paused:!1}}},this.paused=function(){return S},this.pause=function(){S=!0,l.abort(),r=A(t.chunk)?"":r.substring(l.getCharIndex())},this.resume=function(){f.streamer._halted?(S=!1,f.streamer.parseChunk(r,!0)):setTimeout(f.resume,3)},this.aborted=function(){return j},this.abort=function(){j=!0,l.abort(),p.meta.aborted=!0,A(t.complete)&&t.complete(p),r=""},this.guessLineEndings=function(G,w){G=G.substring(0,1048576);var w=new RegExp(q(w)+"([^]*?)"+q(w),"gm"),$=(G=G.replace(w,"")).split("\r"),w=G.split(`
`),G=1<w.length&&w[0].length<$[0].length;if($.length===1||G)return`
`;for(var J=0,B=0;B<$.length;B++)$[B][0]===`
`&&J++;return J>=$.length/2?`\r
`:"\r"}}function q(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M(t){var r=(t=t||{}).delimiter,l=t.newline,m=t.comments,x=t.step,d=t.preview,y=t.fastMode,i=null,b=!1,f=t.quoteChar==null?'"':t.quoteChar,v=f;if(t.escapeChar!==void 0&&(v=t.escapeChar),(typeof r!="string"||-1<g.BAD_DELIMITERS.indexOf(r))&&(r=","),m===r)throw new Error("Comment character same as delimiter");m===!0?m="#":(typeof m!="string"||-1<g.BAD_DELIMITERS.indexOf(m))&&(m=!1),l!==`
`&&l!=="\r"&&l!==`\r
`&&(l=`
`);var u=0,S=!1;this.parse=function(j,C,p){if(typeof j!="string")throw new Error("Input must be a string");var K=j.length,Y=r.length,Z=l.length,V=m.length,T=A(x),k=[],$=[],w=[],G=u=0;if(!j)return ee();if(y||y!==!1&&j.indexOf(f)===-1){for(var J=j.split(l),B=0;B<J.length;B++){if(w=J[B],u+=w.length,B!==J.length-1)u+=l.length;else if(p)return ee();if(!m||w.substring(0,V)!==m){if(T){if(k=[],xe(w.split(r)),oe(),S)return ee()}else xe(w.split(r));if(d&&d<=B)return k=k.slice(0,d),ee(!0)}}return ee()}for(var H=j.indexOf(r,u),I=j.indexOf(l,u),le=new RegExp(q(v)+q(f),"g"),_=j.indexOf(f,u);;)if(j[u]===f)for(_=u,u++;;){if((_=j.indexOf(f,_+1))===-1)return p||$.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:u}),ne();if(_===K-1)return ne(j.substring(u,_).replace(le,f));if(f===v&&j[_+1]===v)_++;else if(f===v||_===0||j[_-1]!==v){H!==-1&&H<_+1&&(H=j.indexOf(r,_+1));var W=me((I=I!==-1&&I<_+1?j.indexOf(l,_+1):I)===-1?H:Math.min(H,I));if(j.substr(_+1+W,Y)===r){w.push(j.substring(u,_).replace(le,f)),j[u=_+1+W+Y]!==f&&(_=j.indexOf(f,u)),H=j.indexOf(r,u),I=j.indexOf(l,u);break}if(W=me(I),j.substring(_+1+W,_+1+W+Z)===l){if(w.push(j.substring(u,_).replace(le,f)),pe(_+1+W+Z),H=j.indexOf(r,u),_=j.indexOf(f,u),T&&(oe(),S))return ee();if(d&&k.length>=d)return ee(!0);break}$.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:k.length,index:u}),_++}}else if(m&&w.length===0&&j.substring(u,u+V)===m){if(I===-1)return ee();u=I+Z,I=j.indexOf(l,u),H=j.indexOf(r,u)}else if(H!==-1&&(H<I||I===-1))w.push(j.substring(u,H)),u=H+Y,H=j.indexOf(r,u);else{if(I===-1)break;if(w.push(j.substring(u,I)),pe(I+Z),T&&(oe(),S))return ee();if(d&&k.length>=d)return ee(!0)}return ne();function xe(X){k.push(X),G=u}function me(X){var re=0;return re=X!==-1&&(X=j.substring(_+1,X))&&X.trim()===""?X.length:re}function ne(X){return p||(X===void 0&&(X=j.substring(u)),w.push(X),u=K,xe(w),T&&oe()),ee()}function pe(X){u=X,xe(w),w=[],I=j.indexOf(l,u)}function ee(X){if(t.header&&!C&&k.length&&!b){var re=k[0],he=Object.create(null),ye=new Set(re);let ke=!1;for(let ue=0;ue<re.length;ue++){let de=re[ue];if(he[de=A(t.transformHeader)?t.transformHeader(de,ue):de]){let ge,Ce=he[de];for(;ge=de+"_"+Ce,Ce++,ye.has(ge););ye.add(ge),re[ue]=ge,he[de]++,ke=!0,(i=i===null?{}:i)[ge]=de}else he[de]=1,re[ue]=de;ye.add(de)}ke&&console.warn("Duplicate headers found and renamed."),b=!0}return{data:k,errors:$,meta:{delimiter:r,linebreak:l,aborted:S,truncated:!!X,cursor:G+(C||0),renamedHeaders:i}}}function oe(){x(ee()),k=[],$=[]}},this.abort=function(){S=!0},this.getCharIndex=function(){return u}}function ie(t){var r=t.data,l=D[r.workerId],m=!1;if(r.error)l.userError(r.error,r.file);else if(r.results&&r.results.data){var x={abort:function(){m=!0,Q(r.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:te,resume:te};if(A(l.userStep)){for(var d=0;d<r.results.data.length&&(l.userStep({data:r.results.data[d],errors:r.results.errors,meta:r.results.meta},x),!m);d++);delete r.results}else A(l.userChunk)&&(l.userChunk(r.results,x,r.file),delete r.results)}r.finished&&!m&&Q(r.workerId,r.results)}function Q(t,r){var l=D[t];A(l.userComplete)&&l.userComplete(r),l.terminate(),delete D[t]}function te(){throw new Error("Not implemented.")}function ae(t){if(typeof t!="object"||t===null)return t;var r,l=Array.isArray(t)?[]:{};for(r in t)l[r]=ae(t[r]);return l}function se(t,r){return function(){t.apply(r,arguments)}}function A(t){return typeof t=="function"}return g.parse=function(t,r){var l=(r=r||{}).dynamicTyping||!1;if(A(l)&&(r.dynamicTypingFunction=l,l={}),r.dynamicTyping=l,r.transform=!!A(r.transform)&&r.transform,!r.worker||!g.WORKERS_SUPPORTED)return l=null,g.NODE_STREAM_INPUT,typeof t=="string"?(t=(m=>m.charCodeAt(0)!==65279?m:m.slice(1))(t),l=new(r.download?R:P)(r)):t.readable===!0&&A(t.read)&&A(t.on)?l=new O(r):(s.File&&t instanceof File||t instanceof Object)&&(l=new z(r)),l.stream(t);(l=(()=>{var m;return!!g.WORKERS_SUPPORTED&&(m=(()=>{var x=s.URL||s.webkitURL||null,d=h.toString();return g.BLOB_URL||(g.BLOB_URL=x.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",d,")();"],{type:"text/javascript"})))})(),(m=new s.Worker(m)).onmessage=ie,m.id=U++,D[m.id]=m)})()).userStep=r.step,l.userChunk=r.chunk,l.userComplete=r.complete,l.userError=r.error,r.step=A(r.step),r.chunk=A(r.chunk),r.complete=A(r.complete),r.error=A(r.error),delete r.worker,l.postMessage({input:t,config:r,workerId:l.id})},g.unparse=function(t,r){var l=!1,m=!0,x=",",d=`\r
`,y='"',i=y+y,b=!1,f=null,v=!1,u=((()=>{if(typeof r=="object"){if(typeof r.delimiter!="string"||g.BAD_DELIMITERS.filter(function(C){return r.delimiter.indexOf(C)!==-1}).length||(x=r.delimiter),typeof r.quotes!="boolean"&&typeof r.quotes!="function"&&!Array.isArray(r.quotes)||(l=r.quotes),typeof r.skipEmptyLines!="boolean"&&typeof r.skipEmptyLines!="string"||(b=r.skipEmptyLines),typeof r.newline=="string"&&(d=r.newline),typeof r.quoteChar=="string"&&(y=r.quoteChar),typeof r.header=="boolean"&&(m=r.header),Array.isArray(r.columns)){if(r.columns.length===0)throw new Error("Option columns is empty");f=r.columns}r.escapeChar!==void 0&&(i=r.escapeChar+y),r.escapeFormulae instanceof RegExp?v=r.escapeFormulae:typeof r.escapeFormulae=="boolean"&&r.escapeFormulae&&(v=/^[=+\-@\t\r].*$/)}})(),new RegExp(q(y),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return S(null,t,b);if(typeof t[0]=="object")return S(f||Object.keys(t[0]),t,b)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||f),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),S(t.fields||[],t.data||[],b);throw new Error("Unable to serialize unrecognized input");function S(C,p,K){var Y="",Z=(typeof C=="string"&&(C=JSON.parse(C)),typeof p=="string"&&(p=JSON.parse(p)),Array.isArray(C)&&0<C.length),V=!Array.isArray(p[0]);if(Z&&m){for(var T=0;T<C.length;T++)0<T&&(Y+=x),Y+=j(C[T],T);0<p.length&&(Y+=d)}for(var k=0;k<p.length;k++){var $=(Z?C:p[k]).length,w=!1,G=Z?Object.keys(p[k]).length===0:p[k].length===0;if(K&&!Z&&(w=K==="greedy"?p[k].join("").trim()==="":p[k].length===1&&p[k][0].length===0),K==="greedy"&&Z){for(var J=[],B=0;B<$;B++){var H=V?C[B]:B;J.push(p[k][H])}w=J.join("").trim()===""}if(!w){for(var I=0;I<$;I++){0<I&&!G&&(Y+=x);var le=Z&&V?C[I]:I;Y+=j(p[k][le],I)}k<p.length-1&&(!K||0<$&&!G)&&(Y+=d)}}return Y}function j(C,p){var K,Y;return C==null?"":C.constructor===Date?JSON.stringify(C).slice(1,25):(Y=!1,v&&typeof C=="string"&&v.test(C)&&(C="'"+C,Y=!0),K=C.toString().replace(u,i),(Y=Y||l===!0||typeof l=="function"&&l(C,p)||Array.isArray(l)&&l[p]||((Z,V)=>{for(var T=0;T<V.length;T++)if(-1<Z.indexOf(V[T]))return!0;return!1})(K,g.BAD_DELIMITERS)||-1<K.indexOf(x)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?y+K+y:K)}},g.RECORD_SEP="",g.UNIT_SEP="",g.BYTE_ORDER_MARK="\uFEFF",g.BAD_DELIMITERS=["\r",`
`,'"',g.BYTE_ORDER_MARK],g.WORKERS_SUPPORTED=!c&&!!s.Worker,g.NODE_STREAM_INPUT=1,g.LocalChunkSize=10485760,g.RemoteChunkSize=5242880,g.DefaultDelimiter=",",g.Parser=M,g.ParserHandle=F,g.NetworkStreamer=R,g.FileStreamer=z,g.StringStreamer=P,g.ReadableStreamStreamer=O,s.jQuery&&((n=s.jQuery).fn.parse=function(t){var r=t.config||{},l=[];return this.each(function(d){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var y=0;y<this.files.length;y++)l.push({file:this.files[y],inputElem:this,instanceConfig:n.extend({},r)})}),m(),this;function m(){if(l.length===0)A(t.complete)&&t.complete();else{var d,y,i,b,f=l[0];if(A(t.before)){var v=t.before(f.file,f.inputElem);if(typeof v=="object"){if(v.action==="abort")return d="AbortError",y=f.file,i=f.inputElem,b=v.reason,void(A(t.error)&&t.error({name:d},y,i,b));if(v.action==="skip")return void x();typeof v.config=="object"&&(f.instanceConfig=n.extend(f.instanceConfig,v.config))}else if(v==="skip")return void x()}var u=f.instanceConfig.complete;f.instanceConfig.complete=function(S){A(u)&&u(S,f.file,f.inputElem),x()},g.parse(f.file,f.instanceConfig)}}function x(){l.splice(0,1),m()}}),L&&(s.onmessage=function(t){t=t.data,g.WORKER_ID===void 0&&t&&(g.WORKER_ID=t.workerId),typeof t.input=="string"?s.postMessage({workerId:g.WORKER_ID,results:g.parse(t.input,t.config),finished:!0}):(s.File&&t.input instanceof File||t.input instanceof Object)&&(t=g.parse(t.input,t.config))&&s.postMessage({workerId:g.WORKER_ID,results:t,finished:!0})}),(R.prototype=Object.create(N.prototype)).constructor=R,(z.prototype=Object.create(N.prototype)).constructor=z,(P.prototype=Object.create(P.prototype)).constructor=P,(O.prototype=Object.create(N.prototype)).constructor=O,g})})(Le);var Xe=Le.exports;const De=Me(Xe),Qe=o=>o.map(a=>{const h=a.achievements?a.achievements.split("|").filter(n=>n.trim()):[],s={background:a.background||"",achievements:h,culturalSignificance:a.culturalSignificance||"",militaryContext:a.militaryContext||"",religiousLegacy:a.religiousLegacy||"",historicalImpact:a.historicalImpact||"",archaeologicalEvidence:a.archaeologicalEvidence||"",culturalInfluence:a.culturalInfluence||"",endOfEra:a.endOfEra||"",artisticTradition:a.artisticTradition||"",architecturalHeritage:a.architecturalHeritage||"",culturalPreservation:a.culturalPreservation||"",modernLegacy:a.modernLegacy||"",scholarlyTradition:a.scholarlyTradition||"",culturalSynthesis:a.culturalSynthesis||""};return Object.keys(s).forEach(n=>{(!s[n]||s[n].length===0)&&delete s[n]}),{id:a.id,name:a.name,filename:a.filename,shortDescription:a.shortDescription,period:a.period,dynasty:a.dynasty,reign:a.reign,historicalContext:s}}),Ve=o=>{const a={};return o.forEach(h=>{a[h.difficulty]={rows:parseInt(h.rows),cols:parseInt(h.cols),pieces:parseInt(h.pieces),label:h.label,description:h.description,skillLevel:h.skillLevel,timeEstimate:h.timeEstimate,educationalFocus:h.educationalFocus}}),a},et=o=>{const a={};return o.forEach(h=>{const s=h.key;let n=h.value;(s==="culturalThemes"||s==="educationalObjectives")&&(n=n.split("|").filter(c=>c.trim())),s==="historicalPeriods"&&(n=n.split("|").map(c=>{const[L,D,U]=c.split(":");return{name:L.trim(),timeframe:D.trim(),significance:U.trim()}})),a[s]=n}),a},ve=o=>new Promise((a,h)=>{De.parse(o,{download:!0,header:!0,skipEmptyLines:!0,complete:s=>{a(s.data)},error:s=>{h(s)}})}),tt=async()=>{try{const[o,a,h]=await Promise.all([ve("/data/royalPortraitsData.csv"),ve("/data/restorationConfigs.csv"),ve("/data/collectionMetadata.csv")]);return{ROYAL_PORTRAITS_DATA:Qe(o),RESTORATION_CONFIGS:Ve(a),COLLECTION_METADATA:et(h)}}catch(o){return console.error("Error loading CSV datasets:",o),null}},rt=25,ce={width:130,height:110},fe={x:400,y:50},st=o=>{const[a,h]=E.useState(null),[s,n]=E.useState("loading");return E.useEffect(()=>{if(!o){n("idle");return}const c=new window.Image;return c.crossOrigin="anonymous",c.onload=()=>{h(c),n("loaded"),console.log("Image loaded successfully:",c.width,"x",c.height)},c.onerror=()=>{n("failed"),console.error("Failed to load image:",o)},c.src=o,()=>{c.onload=null,c.onerror=null}},[o]),[a,s]},at=({piece:o,image:a,onDragEnd:h,isPlaced:s})=>{const[n,c]=E.useState(!1);return a?e.jsxs(Ie,{x:o.x,y:o.y,draggable:!s,onDragStart:()=>c(!0),onDragEnd:L=>{c(!1),h(o.id,L.target.x(),L.target.y())},children:[e.jsx(Ue,{image:a,x:0,y:0,width:ce.width,height:ce.height,crop:{x:o.sourceX,y:o.sourceY,width:o.sourceWidth,height:o.sourceHeight},stroke:s?"#4CAF50":n?"#FFD700":"#D4A574",strokeWidth:s?3:2,opacity:n?.8:1,shadowBlur:n?10:5,shadowColor:"black",cornerRadius:3}),e.jsx(we,{x:0,y:0,width:ce.width,height:ce.height,fill:"transparent",stroke:s?"#4CAF50":n?"#FFD700":"#8B4513",strokeWidth:s?3:2,dash:s?[]:[5,5],cornerRadius:3})]}):null},it=({piece:o,isOccupied:a})=>e.jsx(Ie,{x:o.targetX,y:o.targetY,children:e.jsx(we,{width:ce.width,height:ce.height,fill:a?"rgba(76, 175, 80, 0.2)":"rgba(255, 215, 0, 0.1)",stroke:a?"#4CAF50":"#FFD700",strokeWidth:2,dash:a?[]:[8,8],opacity:.7,cornerRadius:3})}),lt=({gameState:o,updateGameState:a,onBackToMenu:h})=>{var y;const[s,n]=E.useState(null),[c,L]=E.useState(null),[D,U]=st(s==null?void 0:s.filename),[g,N]=E.useState([]),[R,z]=E.useState({}),[P,O]=E.useState({}),[F,q]=E.useState(!1);E.useEffect(()=>{(async()=>{const b=await tt();b&&(N(b.ROYAL_PORTRAITS_DATA),z(b.RESTORATION_CONFIGS),O(b.COLLECTION_METADATA),q(!0))})()},[]),E.useEffect(()=>{console.log("Image loading status:",U),console.log("Image object:",D),console.log("Selected painting:",s),console.log("Selected difficulty:",c)},[D,U,s,c]);const M=E.useMemo(()=>{if(!D||!c)return[];const i=R[c],b=[],f=D.width/i.cols,v=D.height/i.rows;for(let u=0;u<i.rows;u++)for(let S=0;S<i.cols;S++){const j=u*i.cols+S+1;b.push({id:j,x:100+S*80+Math.random()*60,y:550+u*60+Math.random()*40,targetX:fe.x+S*ce.width,targetY:fe.y+u*ce.height,sourceX:S*f,sourceY:u*v,sourceWidth:f,sourceHeight:v,placed:!1,row:u,col:S})}return b.sort(()=>Math.random()-.5)},[D,c]),[ie,Q]=E.useState([]),[te,ae]=E.useState(0),[se,A]=E.useState(!1),t=E.useRef();E.useEffect(()=>{M.length>0&&(Q(M),ae(0),a({progress:{...o.progress,painting:0}}))},[M]);const r=(i,b,f)=>{const v=ie.find(C=>C.id===i),u=v.targetX,S=v.targetY;return Math.sqrt(Math.pow(b-u,2)+Math.pow(f-S,2))<rt?{x:u,y:S,snapped:!0}:{x:b,y:f,snapped:!1}},l=(i,b,f)=>{const v=r(i,b,f);Q(u=>{var T;const S=u.map(k=>k.id===i?(k.placed,v.snapped,{...k,x:v.x,y:v.y,placed:v.snapped}):k),j=S.filter(k=>k.placed).length,C=S.length;ae(j);const p=C>0?j/C:0,K=S.find(k=>k.id===i),Y=(T=ie.find(k=>k.id===i))==null?void 0:T.placed,Z=K==null?void 0:K.placed;let V=0;return!Y&&Z?V=Math.round(100*(c==="hard"?1.5:1)):Y&&!Z&&(V=-50),a({score:Math.max(0,o.score+V),progress:{...o.progress,painting:p}}),S})};E.useEffect(()=>{if(te===M.length&&M.length>0&&!se&&te>0){A(!0);const i=c==="hard"?750:500;a({score:o.score+i})}},[te,M.length,s]);const m=()=>{if(M.length>0&&c){const i=R[c],b=M.map((f,v)=>({...f,x:100+v%i.cols*80+Math.random()*60,y:550+Math.floor(v/i.cols)*60+Math.random()*40,placed:!1})).sort(()=>Math.random()-.5);Q(b),ae(0),A(!1),a({progress:{...o.progress,painting:0}})}},x=i=>{n(i),L(null),Q([]),ae(0),A(!1),a({progress:{...o.progress,painting:0}})},d=i=>{L(i),Q([]),ae(0),A(!1),a({progress:{...o.progress,painting:0}})};return F?s?s&&!c?e.jsx("div",{className:"w-full max-w-7xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("h1",{className:"text-5xl font-display font-bold text-gold-primary mb-2 drop-shadow-sm",children:["ðŸ‘‘ ",s.name]}),e.jsxs("p",{className:"text-xl text-ivory/70 font-light tracking-wide",children:[s.period," â€¢ ",s.dynasty]})]}),e.jsxs("div",{className:"w-full bg-black/60 border border-gold-primary/30 rounded-3xl p-8 backdrop-blur-md mb-8",children:[e.jsx("h2",{className:"text-3xl font-display font-bold text-gold-secondary mb-8 border-b border-white/10 pb-4",children:"ðŸ“œ Complete Historical Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-8 mb-8 bg-black/20 p-8 rounded-2xl border border-white/5",children:[e.jsx("div",{className:"bg-gradient-to-b from-white to-gray-100 rounded-xl p-6 flex justify-center items-center shadow-inner",children:e.jsx("img",{src:s.filename,alt:s.name,className:"max-h-[250px] w-auto object-contain drop-shadow-xl"})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("p",{className:"text-xl text-ivory/80 leading-relaxed mb-6 font-light",children:s.shortDescription}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-xs text-gold-accent uppercase tracking-wider mb-1",children:"ðŸ“… Period"}),e.jsx("span",{className:"text-ivory font-semibold",children:s.period})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-xs text-gold-accent uppercase tracking-wider mb-1",children:"ðŸ‘‘ Dynasty"}),e.jsx("span",{className:"text-ivory font-semibold",children:s.dynasty})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-xs text-gold-accent uppercase tracking-wider mb-1",children:"â±ï¸ Reign"}),e.jsx("span",{className:"text-ivory font-semibold",children:s.reign})]})]})]})]}),s.historicalContext.background&&e.jsxs("div",{className:"bg-black/40 p-8 rounded-2xl mb-6 border border-gold-primary/20",children:[e.jsx("h3",{className:"text-2xl font-bold text-gold-primary mb-4",children:"ðŸ“œ Historical Background"}),e.jsx("p",{className:"text-lg text-ivory/70 leading-relaxed",children:s.historicalContext.background})]}),s.historicalContext.achievements&&s.historicalContext.achievements.length>0&&e.jsxs("div",{className:"bg-black/40 p-8 rounded-2xl mb-6 border border-gold-primary/20",children:[e.jsx("h3",{className:"text-2xl font-bold text-gold-primary mb-4",children:"ðŸ† Major Achievements & Legacy"}),e.jsx("ul",{className:"list-disc list-inside text-lg text-ivory/70 leading-loose space-y-2",children:s.historicalContext.achievements.map((i,b)=>e.jsx("li",{className:"pl-2",children:i},b))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.historicalContext.culturalSignificance&&e.jsxs("div",{className:"bg-gold-primary/10 p-8 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ›ï¸ Cultural Significance"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.culturalSignificance})]}),s.historicalContext.militaryContext&&e.jsxs("div",{className:"bg-red-900/10 p-8 rounded-2xl border border-red-500/20",children:[e.jsx("h4",{className:"text-xl font-bold text-red-400 mb-3",children:"âš”ï¸ Military & Political Context"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.militaryContext})]}),s.historicalContext.religiousLegacy&&e.jsxs("div",{className:"bg-green-900/10 p-8 rounded-2xl border border-green-500/20",children:[e.jsx("h4",{className:"text-xl font-bold text-green-400 mb-3",children:"ðŸ›• Religious Legacy"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.religiousLegacy})]}),s.historicalContext.historicalImpact&&e.jsxs("div",{className:"bg-black/40 p-8 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ“ˆ Historical Impact"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.historicalImpact})]}),s.historicalContext.archaeologicalEvidence&&e.jsxs("div",{className:"bg-amber-900/10 p-8 rounded-2xl border border-amber-500/20",children:[e.jsx("h4",{className:"text-xl font-bold text-amber-500 mb-3",children:"ðŸ”¬ Archaeological Evidence"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.archaeologicalEvidence})]}),s.historicalContext.culturalInfluence&&e.jsxs("div",{className:"bg-gold-primary/10 p-8 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸŒ Cultural Influence"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.culturalInfluence})]}),s.historicalContext.artisticTradition&&e.jsxs("div",{className:"bg-orange-900/10 p-8 rounded-2xl border border-orange-500/20",children:[e.jsx("h4",{className:"text-xl font-bold text-orange-400 mb-3",children:"ðŸŽ¨ Artistic Tradition & Iconography"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.artisticTradition})]}),s.historicalContext.architecturalHeritage&&e.jsxs("div",{className:"bg-black/40 p-8 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ—ï¸ Architectural Heritage"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.architecturalHeritage})]}),s.historicalContext.scholarlyTradition&&e.jsxs("div",{className:"bg-black/40 p-8 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ“š Scholarly Tradition"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.scholarlyTradition})]}),s.historicalContext.culturalSynthesis&&e.jsxs("div",{className:"bg-gold-primary/10 p-8 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ”„ Cultural Synthesis"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.culturalSynthesis})]}),s.historicalContext.endOfEra&&e.jsxs("div",{className:"bg-amber-900/20 p-8 rounded-2xl border border-amber-700/40",children:[e.jsx("h4",{className:"text-xl font-bold text-amber-500 mb-3",children:"ðŸº End of Era"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.endOfEra})]}),s.historicalContext.modernLegacy&&e.jsxs("div",{className:"bg-green-900/10 p-8 rounded-2xl border border-green-500/20",children:[e.jsx("h4",{className:"text-xl font-bold text-green-400 mb-3",children:"ðŸŒŸ Modern Legacy"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed text-lg",children:s.historicalContext.modernLegacy})]})]})]}),e.jsxs("div",{className:"w-full max-w-[1200px] mx-auto pb-12",children:[e.jsx("h2",{className:"text-4xl font-display font-bold text-gold-primary text-center mb-12 drop-shadow-sm",children:"ðŸŽ¯ Select Restoration Complexity"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:Object.entries(R).map(([i,b])=>e.jsxs("button",{className:"bg-black/60 border-2 border-gold-primary/30 rounded-3xl p-8 hover:bg-white/5 hover:border-gold-primary hover:scale-[1.02] hover:-translate-y-2 hover:shadow-[0_20px_40px_rgba(212,175,55,0.2)] transition-all duration-300 group flex flex-col items-center text-center",onClick:()=>d(i),children:[e.jsx("span",{className:"text-8xl block mb-6 transition-transform group-hover:scale-110 duration-300",children:i==="easy"?"ðŸŸ¢":"ðŸ”´"}),e.jsx("h3",{className:"text-3xl font-display font-bold text-gold-secondary mb-4 group-hover:text-gold-primary",children:b.label}),e.jsx("p",{className:"text-lg text-ivory/60 mb-8 min-h-[3rem]",children:b.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full mb-8",children:[e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 flex flex-col",children:[e.jsx("span",{className:"text-xs text-gold-accent font-bold uppercase tracking-wider mb-1",children:"Grid"}),e.jsxs("span",{className:"text-2xl font-bold text-white",children:[b.rows," Ã— ",b.cols]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 flex flex-col",children:[e.jsx("span",{className:"text-xs text-gold-accent font-bold uppercase tracking-wider mb-1",children:"Pieces"}),e.jsx("span",{className:"text-2xl font-bold text-white",children:b.pieces})]})]}),e.jsxs("div",{className:"w-full py-4 mt-auto rounded-xl bg-gold-primary/10 border border-gold-primary/30 text-gold-primary font-bold tracking-widest group-hover:bg-gold-primary group-hover:text-black transition-all flex items-center justify-center gap-2",children:[e.jsx("span",{children:"SELECT DIFFICULTY"}),e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"â†’"})]})]},i))}),e.jsxs("button",{onClick:()=>n(null),className:"mt-12 px-8 py-4 bg-maroon-deep hover:bg-maroon-light border border-white/20 hover:border-white/40 text-white font-bold tracking-wide rounded-xl shadow-lg transition-all active:scale-95 flex items-center gap-2 mx-auto",children:[e.jsx("span",{children:"â†"})," Choose Different Painting"]})]})]})}):e.jsxs("div",{className:"w-full h-screen overflow-hidden flex flex-col bg-black",children:[e.jsxs("div",{className:"flex justify-between items-center bg-black/80 px-8 py-4 border-b border-gold-primary/30 backdrop-blur-md sticky top-0 z-50 shadow-lg",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-gold-primary to-gold-secondary drop-shadow-sm",children:["ðŸŽ¨ ",s.name," Restoration"]}),e.jsxs("p",{className:"text-lg text-ivory/60 font-light tracking-wide mt-1",children:[s.period," â€¢ ",s.dynasty]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 px-5 py-3 rounded-xl border border-white/10",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“Š"}),e.jsxs("div",{children:[e.jsxs("span",{className:"block text-xl font-bold text-white leading-none",children:[te,"/",M.length]}),e.jsx("span",{className:"text-xs text-ivory/50 uppercase tracking-wider",children:"Placed"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 px-5 py-3 rounded-xl border border-white/10",children:[e.jsx("span",{className:"text-2xl",children:"ðŸŽ¯"}),e.jsxs("div",{children:[e.jsxs("span",{className:"block text-xl font-bold text-white leading-none",children:[M.length>0?Math.round(te/M.length*100):0,"%"]}),e.jsx("span",{className:"text-xs text-ivory/50 uppercase tracking-wider",children:"Complete"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 px-5 py-3 rounded-xl border border-white/10",children:[e.jsx("span",{className:"text-2xl",children:"âš™ï¸"}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xl font-bold text-gold-primary leading-none",children:(y=R[c])==null?void 0:y.label}),e.jsx("span",{className:"text-xs text-ivory/50 uppercase tracking-wider",children:"Difficulty"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>L(null),className:"p-3 bg-white/5 hover:bg-white/10 text-ivory/80 rounded-xl border border-white/10 transition-colors",title:"Change Difficulty",children:"âš™ï¸"}),e.jsx("button",{onClick:()=>n(null),className:"p-3 bg-white/5 hover:bg-white/10 text-ivory/80 rounded-xl border border-white/10 transition-colors",title:"Change Painting",children:"ðŸ–¼ï¸"}),e.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-6 py-3 bg-gold-primary/10 hover:bg-gold-primary/20 text-gold-primary font-bold rounded-xl border border-gold-primary/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:!D||M.length===0,children:[e.jsx("span",{children:"ðŸ”„"})," Reset"]})]})]}),e.jsxs("div",{className:"flex-1 relative overflow-hidden flex items-center justify-center p-8",children:[U==="loading"&&e.jsxs("div",{className:"flex flex-col items-center justify-center z-10",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gold-primary/20 border-t-gold-primary rounded-full animate-spin mb-6"}),e.jsxs("h3",{className:"text-2xl font-display font-bold text-gold-secondary animate-pulse",children:["Loading ",s.name,"..."]}),e.jsx("p",{className:"text-ivory/50 mt-2",children:"Preparing restoration canvas"})]}),U==="failed"&&e.jsxs("div",{className:"bg-red-900/10 border border-red-500/30 p-12 rounded-3xl text-center backdrop-blur-md max-w-2xl",children:[e.jsx("span",{className:"text-6xl block mb-6",children:"âŒ"}),e.jsxs("h2",{className:"text-3xl font-bold text-red-400 mb-4",children:["Failed to load ",s.name]}),e.jsx("p",{className:"text-xl text-ivory/60 mb-8",children:"Please ensure the image file exists in the public folder."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-3 bg-red-500/20 hover:bg-red-500/30 text-red-400 font-bold rounded-xl border border-red-500/30 transition-colors",children:"Retry Loading"}),e.jsx("button",{onClick:()=>n(null),className:"px-8 py-3 bg-white/5 hover:bg-white/10 text-ivory font-bold rounded-xl border border-white/10 transition-colors",children:"Choose Different"})]})]}),D&&U==="loaded"&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"bg-[#190f0a]/90 rounded-2xl border-4 border-gold-primary/40 p-4 shadow-2xl backdrop-blur-sm",children:e.jsx(ze,{width:1400,height:800,ref:t,className:"cursor-crosshair",children:e.jsxs(He,{children:[e.jsx(we,{x:fe.x-15,y:fe.y-15,width:ce.width*R[c].cols+30,height:ce.height*R[c].rows+30,fill:"rgba(25, 15, 10, 0.6)",stroke:"rgba(139, 69, 19, 0.8)",strokeWidth:2,cornerRadius:8,shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}),ie.map(i=>e.jsx(it,{piece:i,isOccupied:i.placed},`target-${i.id}`)),ie.map(i=>e.jsx(at,{piece:i,image:D,onDragEnd:l,isPlaced:i.placed},i.id))]})})}),e.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 bg-black/60 px-8 py-4 rounded-full border border-white/10 backdrop-blur-md shadow-xl pointer-events-none",children:e.jsxs("p",{className:"text-lg text-ivory/90 font-light flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl animate-bounce",children:"ðŸ‘†"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Drag and drop"})," fragments to restore the portrait. They will ",e.jsx("strong",{children:"snap"})," when placed correctly."]})]})})]})]}),se&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md animate-in fade-in duration-500",children:e.jsxs("div",{className:"bg-black/80 border border-gold-primary/30 p-12 rounded-3xl text-center max-w-4xl shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-gold-primary/10 to-transparent pointer-events-none"}),e.jsx("span",{className:"text-8xl block mb-6 animate-bounce",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-5xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-gold-primary to-gold-secondary mb-6",children:"Restoration Complete!"}),e.jsxs("div",{className:"inline-flex items-center gap-4 bg-green-900/20 border border-green-500/30 px-8 py-4 rounded-2xl mb-8",children:[e.jsx("span",{className:"text-4xl",children:"ðŸ†"}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"block text-green-400 font-bold tracking-widest text-sm uppercase",children:"Achievement Unlocked"}),e.jsxs("span",{className:"text-xl text-white font-bold",children:[s.name," Restorer"]})]})]}),e.jsxs("p",{className:"text-2xl text-ivory/80 leading-relaxed mb-8 font-light",children:["You have successfully restored the ancient portrait of ",e.jsx("strong",{className:"text-gold-primary",children:s.name}),"."]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 p-8 rounded-2xl mb-10 text-left",children:[e.jsxs("h3",{className:"text-gold-primary font-bold text-xl mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“œ"})," Historical Significance"]}),e.jsx("p",{className:"text-lg text-ivory/70 leading-relaxed",children:s.shortDescription})]}),e.jsx("button",{onClick:()=>A(!1),className:"px-12 py-4 bg-gradient-to-r from-gold-primary to-gold-accent hover:brightness-110 text-black font-bold tracking-widest text-xl rounded-xl shadow-lg transition-transform hover:scale-105 active:scale-95",children:"CONTINUE JOURNEY"})]})})]}):e.jsx("div",{className:"w-full max-w-7xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{className:"text-5xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-gold-primary to-gold-secondary mb-4 drop-shadow-sm",children:"ðŸŽ¨ Royal Portrait Restoration"}),e.jsx("p",{className:"text-xl text-ivory/70 font-light tracking-wide",children:"Choose a Historical Painting to Restore"})]}),e.jsx("div",{className:"flex flex-col gap-12 px-2 md:px-8",children:g.map(i=>e.jsxs("div",{className:"w-full bg-black/60 border border-gold-primary/30 rounded-3xl p-8 backdrop-blur-md shadow-xl",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[350px_1fr] gap-8 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-b from-white to-gray-100 rounded-2xl p-8 flex justify-center items-center shadow-inner",children:e.jsx("img",{src:i.filename,alt:i.name,className:"max-h-[300px] w-auto object-contain drop-shadow-2xl",onError:b=>{b.target.style.display="none"}})}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("h2",{className:"text-4xl font-display font-bold text-gold-primary mb-4 leading-tight",children:i.name}),e.jsx("p",{className:"text-xl text-ivory/80 leading-relaxed mb-6 font-light",children:i.shortDescription}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-xs text-gold-accent uppercase tracking-wider mb-1",children:"ðŸ“… Period"}),e.jsx("span",{className:"text-ivory font-semibold",children:i.period})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-xs text-gold-accent uppercase tracking-wider mb-1",children:"ðŸ‘‘ Dynasty"}),e.jsx("span",{className:"text-ivory font-semibold",children:i.dynasty})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-xs text-gold-accent uppercase tracking-wider mb-1",children:"â±ï¸ Reign"}),e.jsx("span",{className:"text-ivory font-semibold",children:i.reign})]})]}),e.jsxs("button",{onClick:()=>x(i),className:"w-full sm:w-auto self-start px-8 py-4 bg-gradient-to-r from-gold-primary to-gold-accent hover:brightness-110 text-black font-bold tracking-widest text-lg rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2 group",children:["SELECT FOR RESTORATION ",e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"â†’"})]})]})]}),i.historicalContext.background&&e.jsxs("div",{className:"bg-black/40 p-8 rounded-2xl mb-6 border border-gold-primary/20",children:[e.jsx("h3",{className:"text-2xl font-display font-bold text-gold-primary mb-4",children:"ðŸ“œ Historical Background"}),e.jsx("p",{className:"text-lg text-ivory/70 leading-relaxed",children:i.historicalContext.background})]}),i.historicalContext.achievements&&i.historicalContext.achievements.length>0&&e.jsxs("div",{className:"bg-black/40 p-8 rounded-2xl mb-6 border border-gold-primary/20",children:[e.jsx("h3",{className:"text-2xl font-display font-bold text-gold-primary mb-4",children:"ðŸ† Major Achievements & Legacy"}),e.jsx("ul",{className:"list-disc list-inside text-lg text-ivory/70 leading-loose space-y-2",children:i.historicalContext.achievements.map((b,f)=>e.jsx("li",{className:"pl-2",children:b},f))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.historicalContext.culturalSignificance&&e.jsxs("div",{className:"bg-gold-primary/10 p-6 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ›ï¸ Cultural Significance"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.culturalSignificance})]}),i.historicalContext.militaryContext&&e.jsxs("div",{className:"bg-red-900/10 p-6 rounded-2xl border border-red-500/20",children:[e.jsx("h4",{className:"text-xl font-bold text-red-400 mb-3",children:"âš”ï¸ Military & Political Context"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.militaryContext})]}),i.historicalContext.religiousLegacy&&e.jsxs("div",{className:"bg-green-900/10 p-6 rounded-2xl border border-green-500/20",children:[e.jsx("h4",{className:"text-xl font-bold text-green-400 mb-3",children:"ðŸ›• Religious Legacy"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.religiousLegacy})]}),i.historicalContext.historicalImpact&&e.jsxs("div",{className:"bg-black/40 p-6 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ“ˆ Historical Impact"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.historicalImpact})]}),i.historicalContext.archaeologicalEvidence&&e.jsxs("div",{className:"bg-black/40 p-6 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ”¬ Archaeological Evidence"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.archaeologicalEvidence})]}),i.historicalContext.culturalInfluence&&e.jsxs("div",{className:"bg-gold-primary/10 p-6 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸŒ Cultural Influence"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.culturalInfluence})]}),i.historicalContext.artisticTradition&&e.jsxs("div",{className:"bg-orange-900/10 p-6 rounded-2xl border border-orange-500/20",children:[e.jsx("h4",{className:"text-xl font-bold text-orange-400 mb-3",children:"ðŸŽ¨ Artistic Tradition & Iconography"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.artisticTradition})]}),i.historicalContext.architecturalHeritage&&e.jsxs("div",{className:"bg-black/40 p-6 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ—ï¸ Architectural Heritage"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.architecturalHeritage})]}),i.historicalContext.scholarlyTradition&&e.jsxs("div",{className:"bg-black/40 p-6 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ“š Scholarly Tradition"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.scholarlyTradition})]}),i.historicalContext.culturalSynthesis&&e.jsxs("div",{className:"bg-gold-primary/10 p-6 rounded-2xl border border-gold-primary/20",children:[e.jsx("h4",{className:"text-xl font-bold text-gold-primary mb-3",children:"ðŸ”„ Cultural Synthesis"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.culturalSynthesis})]}),i.historicalContext.endOfEra&&e.jsxs("div",{className:"bg-amber-900/20 p-6 rounded-2xl border border-amber-700/40",children:[e.jsx("h4",{className:"text-xl font-bold text-amber-500 mb-3",children:"ðŸº End of Era"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.endOfEra})]}),i.historicalContext.modernLegacy&&e.jsxs("div",{className:"bg-green-900/10 p-6 rounded-2xl border border-green-500/20",children:[e.jsx("h4",{className:"text-xl font-bold text-green-400 mb-3",children:"ðŸŒŸ Modern Legacy"}),e.jsx("p",{className:"text-ivory/70 leading-relaxed",children:i.historicalContext.modernLegacy})]})]})]},i.id))}),e.jsxs("div",{className:"w-full max-w-[1400px] mx-auto mt-12 mb-8 bg-black/40 border border-gold-primary/20 rounded-3xl p-8",children:[e.jsxs("h3",{className:"text-3xl font-display font-bold text-gold-secondary mb-4 flex items-center gap-3 border-b border-white/10 pb-4",children:[e.jsx("span",{children:"ðŸ“š"})," ",P.title]}),e.jsx("p",{className:"text-xl text-ivory/80 leading-relaxed text-center mb-8 max-w-4xl mx-auto",children:P.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 p-4 rounded-2xl border border-white/10",children:[e.jsx("span",{className:"text-3xl",children:"ðŸ“…"}),e.jsxs("span",{className:"text-lg text-ivory/90 font-medium",children:["Historical Period: ",P.timeSpan]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 p-4 rounded-2xl border border-white/10",children:[e.jsx("span",{className:"text-3xl",children:"ðŸ—ºï¸"}),e.jsxs("span",{className:"text-lg text-ivory/90 font-medium",children:["Coverage: ",P.totalPeriodCovered]})]})]})]})]})}):e.jsx("div",{className:"w-full h-screen flex items-center justify-center bg-black/90",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 p-12 bg-black/40 border border-gold-primary/30 rounded-3xl backdrop-blur-xl",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gold-primary/20 border-t-gold-primary rounded-full animate-spin"}),e.jsx("h3",{className:"text-2xl font-display font-bold text-gold-secondary tracking-widest animate-pulse",children:"Loading Royal Portrait Collection..."}),e.jsx("p",{className:"text-xl text-ivory/60 mt-4",children:"Retrieving historical data from museum archives"})]})})},Se=[{id:"crimson",name:"Crimson",hex:"#DC143C",sinhala:"à¶»à¶­à·”",meaning:"Power & Protection"},{id:"gold",name:"Royal Gold",hex:"#FFD700",sinhala:"à¶»à¶±à·Š",meaning:"Divinity & Royalty"},{id:"black",name:"Deep Black",hex:"#1a1a1a",sinhala:"à¶šà·…à·”",meaning:"Mystery & Demons"},{id:"blue",name:"Ocean Blue",hex:"#1E90FF",sinhala:"à¶±à·’à¶½à·Š",meaning:"Sky & Water"},{id:"green",name:"Forest",hex:"#228B22",sinhala:"à¶šà·œà·…",meaning:"Nature & Life"},{id:"white",name:"Pure White",hex:"#FFFFFF",sinhala:"à·ƒà·”à¶¯à·”",meaning:"Purity & Peace"},{id:"orange",name:"Sunset",hex:"#FF6600",sinhala:"à¶­à·à¶¹à·’à¶½à·’",meaning:"Energy & Fire"},{id:"brown",name:"Earth",hex:"#8B4513",sinhala:"à¶¯à·”à¶¹à·”à¶»à·”",meaning:"Stability"}],nt=o=>{const a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),255]:[0,0,0,255]},Ee=(o,a,h,s)=>{const n=(s*a+h)*4;return[o[n],o[n+1],o[n+2],o[n+3]]},ot=(o,a,h,s,n)=>{const c=(s*a+h)*4;o[c]=n[0],o[c+1]=n[1],o[c+2]=n[2],o[c+3]=n[3]},Re=(o,a,h=32)=>Math.abs(o[0]-a[0])<=h&&Math.abs(o[1]-a[1])<=h&&Math.abs(o[2]-a[2])<=h,Te=(o,a=80)=>o[0]*.299+o[1]*.587+o[2]*.114<a&&o[3]>200,dt=(o,a,h)=>{const s=new Uint8ClampedArray(o.data),n=o.data,c=new Uint8Array(a*h);for(let N=0;N<h;N++)for(let R=0;R<a;R++){const z=(N*a+R)*4,P=Math.round(s[z]*.299+s[z+1]*.587+s[z+2]*.114);c[N*a+R]=P}const L=new Uint8Array(a*h),D=[[-1,0,1],[-2,0,2],[-1,0,1]],U=[[-1,-2,-1],[0,0,0],[1,2,1]];for(let N=1;N<h-1;N++)for(let R=1;R<a-1;R++){let z=0,P=0;for(let F=-1;F<=1;F++)for(let q=-1;q<=1;q++){const M=c[(N+F)*a+(R+q)];z+=M*D[F+1][q+1],P+=M*U[F+1][q+1]}const O=Math.sqrt(z*z+P*P);L[N*a+R]=Math.min(255,O)}const g=30;for(let N=0;N<h;N++)for(let R=0;R<a;R++){const z=(N*a+R)*4,O=L[N*a+R]>g?0:255;n[z]=O,n[z+1]=O,n[z+2]=O,n[z+3]=255}return o},ct=(o,a,h,s)=>{const{width:n,height:c,data:L}=o,D=nt(s),U=Ee(L,n,a,h);if(Te(U)||Re(U,D,5))return o;const g=new Uint8Array(n*c),N=[[a,h]],R=(P,O)=>{if(P<0||P>=n||O<0||O>=c)return!1;const F=O*n+P;if(g[F])return!1;const q=Ee(L,n,P,O);return Te(q)?!1:Re(q,U,40)};let z=0;for(;N.length>0;){const[P,O]=N.pop();if(!R(P,O))continue;let F=P;for(;F>0&&R(F-1,O);)F--;let q=!1,M=!1;for(;F<n&&R(F,O);){const ie=O*n+F;g[ie]=1,ot(L,n,F,O,D),z++,O>0&&(R(F,O-1)?q||(N.push([F,O-1]),q=!0):q=!1),O<c-1&&(R(F,O+1)?M||(N.push([F,O+1]),M=!0):M=!1),F++}}return console.log(`Flood fill completed: ${z} pixels colored`),o};function ht({onBack:o}){const[a,h]=E.useState([]),[s,n]=E.useState(null),[c,L]=E.useState(Se[0]),[D,U]=E.useState(!1),[g,N]=E.useState(!0),[R,z]=E.useState([]),[P,O]=E.useState(-1),[F,q]=E.useState(1),[M,ie]=E.useState(null),Q=E.useRef(null),te=E.useRef(null),ae={width:800,height:900};E.useEffect(()=>{(async()=>{try{const i=await(await fetch("/data/kolamMasksData.csv")).text();De.parse(i,{header:!0,skipEmptyLines:!0,complete:b=>{const f=b.data.map(v=>({id:v.id,name:v.name,src:v.src,origin:v.origin||"Southern Province",shortDescription:v.shortDescription,maskType:v.maskType,carvingTime:v.carvingTime}));h(f),N(!1)}})}catch(y){console.error("Error loading masks:",y),N(!1)}})()},[]),E.useEffect(()=>{if(!s||!Q.current)return;const d=Q.current,y=d.getContext("2d",{willReadFrequently:!0}),i=new Image;i.onload=()=>{y.fillStyle="#FFFFFF",y.fillRect(0,0,d.width,d.height);const b=Math.min(d.width/i.width,d.height/i.height)*.9,f=(d.width-i.width*b)/2,v=(d.height-i.height*b)/2;y.drawImage(i,f,v,i.width*b,i.height*b);const u=y.getImageData(0,0,d.width,d.height),S=dt(u,d.width,d.height);y.putImageData(S,0,0),te.current=y.getImageData(0,0,d.width,d.height),z([te.current]),O(0),U(!1)},i.onerror=()=>{console.error("Failed to load mask image"),U(!1)},U(!0),i.src=s.src},[s]);const se=E.useCallback(d=>{if(!s||D)return;const y=Q.current,i=y.getContext("2d",{willReadFrequently:!0}),b=y.getBoundingClientRect(),f=y.width/b.width,v=y.height/b.height,u=Math.floor((d.clientX-b.left)*f),S=Math.floor((d.clientY-b.top)*v);if(console.log(`Canvas click at (${u}, ${S}) with color ${c.hex}`),u<0||u>=y.width||S<0||S>=y.height)return;const j=i.getImageData(0,0,y.width,y.height),C=ct(j,u,S,c.hex);i.putImageData(C,0,0);const p=R.slice(0,P+1);p.push(i.getImageData(0,0,y.width,y.height)),p.length>30&&p.shift(),z(p),O(p.length-1)},[c,s,D,R,P]),A=()=>{P>0&&(Q.current.getContext("2d",{willReadFrequently:!0}).putImageData(R[P-1],0,0),O(P-1))},t=()=>{te.current&&(Q.current.getContext("2d",{willReadFrequently:!0}).putImageData(te.current,0,0),z([te.current]),O(0))},r=()=>{const d=Q.current,y=document.createElement("a");y.download=`${(s==null?void 0:s.name)||"mask"}_colored.png`,y.href=d.toDataURL("image/png"),y.click()},l=()=>q(d=>Math.min(d+.25,2.5)),m=()=>q(d=>Math.max(d-.25,.5)),x=()=>q(1);return g?e.jsx("div",{className:"w-full h-full min-h-[600px] flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 bg-black/80 p-12 rounded-3xl border border-gold-primary/30 backdrop-blur-xl",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gold-primary/20 border-t-gold-primary rounded-full animate-spin"}),e.jsx("p",{className:"text-xl text-gold-secondary font-display tracking-wider animate-pulse",children:"Loading Museum Collection..."})]})}):s?e.jsxs("div",{className:"w-full h-full flex flex-col p-4 relative",children:[e.jsxs("header",{className:"flex flex-col items-center mb-6 z-10",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-gold-secondary drop-shadow-md mb-2",children:s.name}),e.jsx("p",{className:"text-lg text-ivory/60 font-medium tracking-wide",children:"Touch any white area to fill with your selected color"})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-6 h-full overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col relative bg-black/20 rounded-3xl border border-white/5 overflow-hidden group",children:[e.jsxs("div",{className:"flex-1 relative flex items-center justify-center overflow-hidden",children:[D&&e.jsxs("div",{className:"absolute inset-0 bg-black/90 z-50 flex flex-col items-center justify-center backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-gold-primary/30 border-t-gold-primary rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gold-secondary tracking-widest text-sm uppercase",children:"Preparing Canvas..."})]}),e.jsx("canvas",{ref:Q,width:ae.width,height:ae.height,onClick:se,className:"max-w-full max-h-full object-contain cursor-crosshair drop-shadow-2xl transition-transform duration-200 ease-out",style:{transform:`scale(${F})`,transformOrigin:"center center"}})]}),e.jsxs("div",{className:"absolute bottom-6 right-6 flex flex-col gap-2 bg-black/60 backdrop-blur-md p-2 rounded-2xl border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("button",{className:"w-10 h-10 flex items-center justify-center bg-white/10 rounded-xl text-xl hover:bg-gold-primary hover:text-black transition-colors",onClick:l,disabled:F>=2.5,children:"+"}),e.jsxs("span",{className:"text-center text-xs font-bold text-gold-primary",children:[Math.round(F*100),"%"]}),e.jsx("button",{className:"w-10 h-10 flex items-center justify-center bg-white/10 rounded-xl text-xl hover:bg-gold-primary hover:text-black transition-colors",onClick:m,disabled:F<=.5,children:"âˆ’"}),e.jsx("div",{className:"h-px bg-white/20 my-1"}),e.jsx("button",{className:"w-10 h-10 flex items-center justify-center bg-white/10 rounded-xl text-xl hover:bg-gold-primary hover:text-black transition-colors",onClick:x,children:"âŸ²"})]}),e.jsxs("div",{className:"absolute bottom-6 left-6 bg-black/60 backdrop-blur-md px-6 py-3 rounded-full border border-white/10 text-sm text-ivory/80 pointer-events-none",children:[e.jsxs("span",{className:"mr-4",children:["ðŸ–Œï¸ ",e.jsx("strong",{children:"Tap"})," to fill"]}),e.jsxs("span",{className:"mr-4",children:["ðŸ” ",e.jsx("strong",{children:"Zoom"})," for detail"]}),e.jsxs("span",{children:["â†©ï¸ ",e.jsx("strong",{children:"Undo"})," mistakes"]})]})]}),e.jsxs("div",{className:"w-full lg:w-96 flex flex-col gap-6 shrink-0",children:[e.jsxs("div",{className:"bg-black/40 border border-gold-primary/20 rounded-3xl p-6 flex flex-col flex-1 backdrop-blur-md shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-gold-secondary mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŽ¨"})," Color Palette"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6 overflow-y-auto pr-2 custom-scrollbar flex-1 min-h-[300px]",children:Se.map(d=>e.jsx("button",{className:`relative w-full aspect-square rounded-2xl shadow-md transition-all duration-200 group overflow-hidden border-4
                    ${c.id===d.id?"border-gold-secondary scale-95 ring-4 ring-gold-secondary/20 z-10":"border-transparent hover:scale-105 hover:z-10"}`,style:{backgroundColor:d.hex},onClick:()=>L(d),children:e.jsx("div",{className:`absolute inset-x-0 bottom-0 bg-black/50 p-2 text-center backdrop-blur-sm transform transition-transform duration-300 ${c.id===d.id?"translate-y-0":"translate-y-full group-hover:translate-y-0"}`,children:e.jsx("span",{className:"text-xs font-bold text-white uppercase tracking-wider",children:d.name})})},d.id))}),e.jsxs("div",{className:"mt-auto bg-black/40 rounded-2xl p-4 border border-white/5 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-white/20 shadow-inner",style:{backgroundColor:c.hex}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gold-primary font-bold",children:c.name}),e.jsxs("p",{className:"text-xs text-ivory/60 italic",children:['"',c.meaning,'"']})]})]})]}),e.jsxs("div",{className:"bg-black/40 border border-gold-primary/20 rounded-3xl p-6 backdrop-blur-md shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-gold-secondary mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"âš¡"})," Actions"]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{className:"w-full py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-ivory font-bold tracking-wide transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",onClick:A,disabled:P<=0,children:[e.jsx("span",{children:"â†©ï¸"})," UNDO"]}),e.jsxs("button",{className:"w-full py-3 bg-maroon-deep/80 hover:bg-maroon-deep border border-maroon-temple/50 rounded-xl text-white font-bold tracking-wide transition-all active:scale-95 flex items-center justify-center gap-2",onClick:t,children:[e.jsx("span",{children:"ðŸ”„"})," RESET"]}),e.jsxs("button",{className:"w-full py-4 mt-2 bg-gradient-to-r from-gold-primary to-gold-accent hover:brightness-110 text-black font-bold tracking-widest text-lg rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2",onClick:r,children:[e.jsx("span",{children:"ðŸ’¾"})," SAVE ARTWORK"]})]})]})]})]}),e.jsxs("button",{className:"fixed bottom-8 left-8 bg-black/80 backdrop-blur-xl border border-gold-primary/30 text-gold-secondary px-6 py-3 rounded-full font-semibold hover:bg-gold-primary/20 hover:border-gold-primary transition-all shadow-lg z-[100] flex items-center gap-2",onClick:()=>n(null),children:[e.jsx("span",{children:"â†"})," Choose Another Mask"]})]}):e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col gap-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{className:"text-5xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-gold-primary to-gold-secondary mb-2 drop-shadow-sm",children:"ðŸŽ­ Traditional Mask Coloring"}),e.jsx("p",{className:"text-xl text-ivory/70 font-light",children:"Select a sacred Sri Lankan mask to begin your artistic journey"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-8 pb-20",children:a.map(d=>e.jsxs("div",{className:"bg-black/40 border-2 border-gold-primary/30 rounded-3xl overflow-hidden cursor-pointer transition-all duration-500 hover:shadow-[0_0_40px_rgba(212,175,55,0.2)] group flex flex-col h-full",style:{transform:M===d.id?"translateY(-10px)":"none",borderColor:M===d.id?"#FFD700":"rgba(184, 134, 11, 0.3)"},onMouseEnter:()=>ie(d.id),onMouseLeave:()=>ie(null),onClick:()=>n(d),children:[e.jsxs("div",{className:"h-64 bg-white/5 flex items-center justify-center p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/60 z-10"}),e.jsx("img",{src:d.src,alt:d.name,className:"h-full object-contain filter drop-shadow-[0_10px_20px_rgba(0,0,0,0.5)] transition-transform duration-700 ease-out z-0",style:{transform:M===d.id?"scale(1.1)":"none"}})]}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col bg-gradient-to-b from-black/60 to-black/80 backdrop-blur-sm border-t border-white/10",children:[e.jsx("h3",{className:"text-2xl font-display font-bold text-gold-secondary mb-2 group-hover:text-gold-primary transition-colors",children:d.name}),e.jsx("p",{className:"text-sm text-ivory/70 mb-6 leading-relaxed flex-1",children:d.shortDescription}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsxs("span",{className:"px-3 py-1 rounded-full bg-white/5 border border-white/10 text-xs text-gold-accent font-semibold tracking-wider flex items-center gap-1",children:["ðŸ“ ",d.origin]}),e.jsxs("span",{className:"px-3 py-1 rounded-full bg-white/5 border border-white/10 text-xs text-gold-accent font-semibold tracking-wider flex items-center gap-1",children:["ðŸŽ­ ",d.maskType]})]}),e.jsxs("button",{className:"w-full py-3 bg-gradient-to-r from-gold-primary to-gold-accent text-black font-bold tracking-widest rounded-xl hover:brightness-110 active:scale-95 transition-all shadow-lg flex items-center justify-center gap-2 group-hover:shadow-[0_0_20px_rgba(212,175,55,0.4)]",children:[e.jsx("span",{children:"ðŸŽ¨"})," START COLORING"]})]})]},d.id))}),o&&e.jsxs("button",{className:"fixed bottom-8 left-8 bg-black/80 backdrop-blur-xl border border-gold-primary/30 text-gold-secondary px-6 py-3 rounded-full font-semibold hover:bg-gold-primary/20 hover:border-gold-primary transition-all shadow-lg z-50 flex items-center gap-2",onClick:o,children:[e.jsx("span",{children:"â†"})," Back to Gallery"]})]})})}const xt=({gameState:o,updateGameState:a,onBackToMenu:h})=>e.jsx("div",{className:"w-full max-w-7xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-5xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-gold-primary to-gold-secondary mb-4 drop-shadow-sm",children:"ðŸº Clay Pot Decoration"}),e.jsx("p",{className:"text-xl text-ivory/70 font-light tracking-wide",children:"Decorate pottery with ancient motifs and learn their symbolic meanings"})]}),e.jsx("div",{className:"w-full max-w-4xl mx-auto bg-black/40 border border-gold-primary/20 rounded-3xl p-12 backdrop-blur-md shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-8xl block mb-8 animate-bounce",children:"ðŸº"}),e.jsx("h2",{className:"text-4xl font-display font-bold text-gold-secondary mb-6",children:"Coming Soon!"}),e.jsx("p",{className:"text-2xl text-ivory/60 leading-relaxed mb-12 max-w-2xl mx-auto",children:"This simulation will let you decorate traditional Sri Lankan pottery with authentic patterns from the Anuradhapura and Polonnaruwa periods."}),e.jsxs("div",{className:"bg-black/40 rounded-3xl p-10 border-2 border-gold-primary/30 shadow-inner",children:[e.jsx("h3",{className:"text-2xl font-display font-bold text-gold-primary mb-8",children:"Planned Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-left",children:[{icon:"ðŸª·",text:"Pattern stamp tools (lotus, elephant, peacock)"},{icon:"ðŸ“",text:"Geometric border creators"},{icon:"ðŸ“š",text:"Traditional motif library with meanings"},{icon:"âš–ï¸",text:"Symmetrical design assistance"},{icon:"ðŸŽ¨",text:"Authentic historical color palettes"},{icon:"ðŸ›ï¸",text:"Cultural context for each motif"}].map((s,n)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gold-primary/10 rounded-xl border border-gold-primary/20 transition-transform hover:scale-105",children:[e.jsx("span",{className:"text-3xl",children:s.icon}),e.jsx("span",{className:"text-lg text-ivory/90 font-medium",children:s.text})]},n))})]}),e.jsxs("button",{onClick:h,className:"mt-12 px-8 py-4 bg-gradient-to-r from-gold-primary to-gold-accent hover:brightness-110 text-black font-bold tracking-widest text-lg rounded-xl shadow-lg transition-all active:scale-95 flex items-center gap-2 mx-auto",children:[e.jsx("span",{children:"â†"})," Back to Craft Selection"]})]})})]})}),mt=({gameState:o})=>{const{score:a,level:h,progress:s}=o,n=Math.min(100,Math.floor(a/1e3*100));return e.jsx("div",{className:"w-[95%] mx-auto mb-6 z-10 relative",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-black/60 border border-gold-primary/30 rounded-2xl p-4 flex items-center gap-4 backdrop-blur-md shadow-lg",children:[e.jsx("span",{className:"text-4xl filter drop-shadow-md",children:"â­"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-2xl font-bold text-gold-secondary font-display",children:a}),e.jsx("span",{className:"text-xs uppercase tracking-wide text-ivory/60 font-semibold",children:"Cultural Points"})]})]}),e.jsxs("div",{className:"bg-black/60 border border-gold-primary/30 rounded-2xl p-4 flex items-center gap-4 backdrop-blur-md shadow-lg",children:[e.jsx("span",{className:"text-4xl filter drop-shadow-md",children:"ðŸ†"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-2xl font-bold text-gold-secondary font-display",children:["Level ",h]}),e.jsx("span",{className:"text-xs uppercase tracking-wide text-ivory/60 font-semibold",children:"Craftsperson"})]})]}),e.jsxs("div",{className:"bg-black/60 border border-gold-primary/30 rounded-2xl p-4 flex items-center gap-4 backdrop-blur-md shadow-lg md:col-span-1",children:[e.jsx("span",{className:"text-4xl filter drop-shadow-md",children:"ðŸ“ˆ"}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-ivory/60 font-semibold",children:"Overall Progress"}),e.jsxs("span",{className:"text-xl font-bold text-gold-primary font-display",children:[n,"%"]})]}),e.jsx("div",{className:"h-3 w-full bg-white/10 rounded-full overflow-hidden border border-white/5",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-gold-accent via-gold-primary to-gold-secondary transition-all duration-1000 ease-out shadow-[0_0_10px_rgba(212,175,55,0.5)]",style:{width:`${n}%`}})})]})]})]})})},ut={painting:{title:"Kandyan Painting Restoration",icon:"ðŸŽ¨",introduction:"You are restoring a traditional Kandyan mural from the Kingdom of Kandy (1469-1815 CE). These masterpieces represent the pinnacle of Sri Lankan Buddhist art.",steps:[{title:"Sacred Iconography & Pigments",content:"Traditional Kandyan paintings employ sophisticated color symbology rooted in Theravada Buddhist cosmology. Red ochre represents passion and power. Blue signifies wisdom and tranquility. Gold indicates divine radiance.",tip:"Divine figures use cooler, transcendent hues while earthly beings use warmer tones."},{title:"Compositional Elements",content:"The lotus represents spiritual purity. Elephants symbolize mental strength. Geometric borders represent cosmic order. Floral scrollwork indicates the abundance of merit.",tip:"Larger figures indicate spiritual importance, smaller elements represent earthly concerns."},{title:"Narrative Sequences",content:"You're reconstructing Jataka stories (Buddha's previous lives). These visual narratives served as teaching tools for both monks and lay devotees.",tip:"Each scene connects to larger themes of karma, rebirth, and liberation."}],culturalContext:"These murals adorned the Dalada Maligawa (Temple of the Sacred Tooth Relic). Created under royal patronage, they represent court art, religious instruction, and cultural identity."},mask:{title:"Kolam Mask Painting",icon:"ðŸŽ­",introduction:"You are creating a traditional Kolam mask for Sanni Yakuma ceremonies, an ancient healing tradition representing one of the world's oldest forms of psychological therapy.",steps:[{title:"Sacred Foundation Colors",content:"The red base represents fierce protective energy of benevolent demons. This foundation color connects to ancient animistic beliefs where red symbolized life force.",tip:"Apply base colors with reverent attention - this was considered a sacred act."},{title:"Apotropaic Features",content:"Exaggerated eyes create hypnotic power to entrance evil spirits. The gaping mouth represents the demon's ability to devour illness. Flared nostrils indicate breath control.",tip:"Bold, confident strokes channel the mask's spiritual energy."},{title:"Protective Symbols",content:"Geometric patterns derive from Hindu-Buddhist yantra traditions. Flame motifs represent purification. Spiral designs indicate cosmic energy.",tip:"Hand-crafted irregularities add authentic spiritual character."}],culturalContext:"Kolam masks belong to the Sanni Yakuma tradition. These healing ceremonies combine pre-Buddhist shamanic practices with Ayurvedic medicine and Buddhist psychological insights."},pottery:{title:"Clay Pot Decoration",icon:"ðŸº",introduction:"You are decorating a ceremonial vessel using motifs that evolved over 2,500 years of Sri Lankan ceramic traditions from Anuradhapura and Polonnaruwa.",steps:[{title:"Sacred Iconographic Motifs",content:"The lotus represents spiritual purity. Elephants signify mental strength and royal power. Peacocks indicate vigilance against spiritual dangers.",tip:"Begin with central motifs, then add secondary elements."},{title:"Rhythmic Patterns",content:"Border patterns create protective boundaries. Wave patterns represent the ocean of samsara. Spiral motifs indicate energy transformation.",tip:"Use stamp tools to achieve consistent repetition."},{title:"Functional Beauty",content:"Your completed vessel embodies the Lankan principle that everyday objects should elevate daily life through beauty and spiritual meaning.",tip:"Overall harmony is more important than individual detail perfection."}],culturalContext:"Lankan pottery traditions began with indigenous proto-historic cultures and reached sophisticated heights during the Anuradhapura period (377 BCE - 1017 CE)."}},pt=({craftType:o,onClose:a})=>{var D,U,g;const[h,s]=E.useState(0),n=ut[o];if(!n)return null;const c=()=>s(N=>Math.min(N+1,n.steps.length-1)),L=()=>s(N=>Math.max(N-1,0));return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:e.jsxs("div",{className:"w-full max-w-4xl bg-black/80 border border-gold-primary/30 rounded-3xl overflow-hidden shadow-2xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex justify-between items-center bg-gold-primary/10 px-8 py-6 border-b border-gold-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-4xl bg-black/20 w-16 h-16 rounded-full flex items-center justify-center border border-gold-primary/30",children:n.icon}),e.jsx("h2",{className:"text-3xl font-display font-bold text-gold-primary",children:n.title})]}),e.jsx("button",{onClick:a,className:"w-12 h-12 flex items-center justify-center rounded-full bg-white/5 hover:bg-white/10 text-white/50 hover:text-white transition-colors text-xl font-bold",children:"âœ•"})]}),e.jsxs("div",{className:"p-8 overflow-y-auto custom-scrollbar",children:[e.jsx("div",{className:"bg-white/5 p-6 rounded-2xl border border-white/10 mb-8",children:e.jsx("p",{className:"text-xl text-ivory/90 leading-relaxed font-light",children:n.introduction})}),e.jsxs("div",{className:"flex flex-col gap-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded-2xl p-4 border border-white/10",children:[e.jsxs("button",{onClick:L,disabled:h===0,className:"px-6 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-ivory disabled:opacity-30 disabled:cursor-not-allowed transition-all font-medium flex items-center gap-2",children:[e.jsx("span",{children:"â†"})," Previous"]}),e.jsxs("span",{className:"text-gold-accent font-bold tracking-widest text-sm uppercase",children:["Step ",h+1," of ",n.steps.length]}),e.jsxs("button",{onClick:c,disabled:h===n.steps.length-1,className:"px-6 py-3 rounded-xl bg-gold-primary/20 hover:bg-gold-primary/30 text-gold-primary disabled:opacity-30 disabled:cursor-not-allowed transition-all font-medium flex items-center gap-2",children:["Next ",e.jsx("span",{children:"â†’"})]})]}),e.jsxs("div",{className:"bg-black/40 border border-gold-primary/20 p-8 rounded-2xl min-h-[300px] flex flex-col justify-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gold-secondary mb-4",children:(D=n.steps[h])==null?void 0:D.title}),e.jsx("p",{className:"text-xl text-ivory/80 leading-relaxed mb-8",children:(U=n.steps[h])==null?void 0:U.content}),e.jsxs("div",{className:"bg-gold-primary/10 border-l-4 border-gold-primary p-4 rounded-r-xl flex gap-4 items-start",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ’¡"}),e.jsxs("span",{className:"text-lg text-ivory/90",children:[e.jsx("strong",{className:"text-gold-primary block mb-1",children:"Expert Tip:"}),(g=n.steps[h])==null?void 0:g.tip]})]})]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-8 mt-8",children:[e.jsxs("h4",{className:"text-gold-primary font-bold text-lg mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“œ"})," Cultural Context"]}),e.jsx("p",{className:"text-lg text-ivory/60 leading-relaxed italic",children:n.culturalContext})]})]})]})})},je={PAINTING:"painting",MASK:"mask",POTTERY:"pottery"};function gt(){const[o,a]=E.useState(null),[h,s]=E.useState({score:0,level:1,achievements:[],progress:{}}),[n,c]=E.useState(!1),L=N=>{a(N),c(!1)},D=()=>{a(null)},U=N=>{s(R=>({...R,...N}))},g=()=>{const N={gameState:h,updateGameState:U,onBackToMenu:D};switch(o){case je.PAINTING:return e.jsx(lt,{...N});case je.MASK:return e.jsx(ht,{onBack:D});case je.POTTERY:return e.jsx(xt,{...N});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gradient-primary font-primary flex flex-col text-ivory",children:[e.jsxs("header",{className:"sticky top-0 z-50 px-6 py-4 bg-black/20 backdrop-blur-xl border-b border-gold-primary/30 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("h1",{className:"text-2xl font-display font-bold text-gold-secondary flex items-center gap-3 drop-shadow-md",children:[e.jsx("span",{className:"text-3xl",children:"ðŸ›ï¸"}),"Sri Lankan Cultural Museum"]})}),e.jsx("nav",{className:"flex items-center gap-4",children:o&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:D,className:"px-5 py-2.5 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 border border-gold-primary/30 hover:bg-gold-primary/20 text-ivory hover:border-gold-primary",children:[e.jsx("span",{children:"â†"})," Back to Menu"]}),e.jsxs("button",{onClick:()=>c(!n),className:"px-5 py-2.5 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 bg-gold-primary/10 border border-gold-primary/30 hover:bg-gold-primary/30 text-gold-secondary hover:text-white",children:[e.jsx("span",{children:"ðŸ“–"})," ",n?"Hide Guide":"Cultural Guide"]})]})})]}),e.jsx("main",{className:"flex-1 w-full max-w-[1920px] mx-auto p-6 md:p-8 flex flex-col",children:o?e.jsxs("div",{className:"relative flex-1 flex flex-col w-full bg-black/40 rounded-3xl border border-gold-primary/20 shadow-2xl backdrop-blur-sm overflow-hidden min-h-[800px]",children:[e.jsx(mt,{gameState:h}),e.jsx("div",{className:"flex-1 relative",children:g()})]}):e.jsx(Je,{onCraftSelect:L})}),n&&o&&e.jsx(pt,{craftType:o,onClose:()=>c(!1)})]})}const ft=Ne.createRoot(document.getElementById("root"));ft.render(e.jsx(Be.StrictMode,{children:e.jsx(gt,{})}));
